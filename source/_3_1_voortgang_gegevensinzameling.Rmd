# Voortgang soortenmeetnetten

We bespreken de voortgang van de soortenmeetnetten voor volgende onderdelen:

* gegevensinzameling,
* databeheer en dataontsluiting,
* gegevensanalyse,
* rapportage en communicatie.

## Gegevensinzameling

Jaarlijks gebeurt er na het veldseizoen voor alle meetnetten een grondige evaluatie van de gegevensinzameling. Daarbij evalueren we de kwaliteit van de ingezamelde gegevens en toetsen we de kwantiteit aan gegevens aan de vooropgestelde doelen per meetnet. We evalueren ook het monitoringsprotocollen en sturen dit bij waar nodig.    

### Kwantiteit en kwaliteit van de ingezamelde gegevens 

Jaarlijks worden er per meetnet doelen opgesteld. Voor het meerendeel van de meetnetten drukken we deze doelen uit in het aantal getelde meetnetlocaties conform het monitoringsprotocol. Een meetnetlocatie is geteld conform het monitoringsprotocol als de telmethode correct werd gevolgd bij geschikte weersomstandigheden en als er voldoende tellingen werden uitgevoerd binnen de geschikte telperiode.


```{r, fig.height= 7, fig.width= 6.5}
library(plotly)

  colors_beoordeling <- c( "0 - 49 %" = "red", "50 - 69 %" = "orange", "70 - 89 %" = inbo.geelgr, "90 - 99 %" = inbo.lichtblauw , "100%" = inbo.donkergroen)

voortgang_meetnetten %>%
  filter(meetnet_type == "meetnet") %>%
  filter(is_sample == 1) %>%
  filter(soortgroep != "Vaatplanten") %>%
  mutate(meetnet = as.character(meetnet),
         tekst = str_c(aantal_eenheid_doel, "/", totaal_doel)) %>%
  ggplot(aes(x = factor(jaar), y = meetnet_tekst, fill = totaal_gehaald_categorie, label = tekst)) +
  geom_tile(colour = "white", size = 1, ) +
  geom_text(size = 2) +
  facet_grid(soortgroep~ jaar, space = "free_y", scales = "free", as.table = TRUE) +
  scale_fill_manual(values = colors_beoordeling) +
  theme(strip.text.y = element_text(angle = 0),
        panel.background = element_blank(),
        axis.title.x = element_blank(),
        axis.text.x = element_blank(),
        axis.ticks = element_blank()) +
  labs(fill = "Doelbereik (%)", x = "Jaar", y = "Meetnet")
  


```



### Bijsturing monitoringsprotocollen






```{r, warnings = FALSE}

bezochte_locaties <- evaluatie_locaties %>%
  filter(locatie_bezocht == 1) %>%
  filter(soortgroep != "vogels")

bezochte_locaties_sf <- locaties %>%
  st_transform(crs = 31370) %>%
  st_centroid() %>%
 # st_jitter(amount = 2500) %>%
  st_transform(crs = 4326) %>%
  inner_join(bezochte_locaties, by = c("soortgroep", "meetnet", "locatie", "is_active", "is_sample"))

```



```{r}

locaties_shared <- SharedData$new(bezochte_locaties_sf)

bscols(
  list(
    bscols(widths = c(6, 3, 3),
    filter_select("meetnet", "Selecteer meetnet", locaties_shared, ~meetnet),
    filter_checkbox("jaar", "Selecteer jaar", locaties_shared, ~jaar),
    filter_checkbox("is_sample", "Selecteer type locatie", locaties_shared, ~ifelse(is_sample == 1, "Meetnetlocatie", "Extra locatie"))),
    leaflet(locaties_shared, options = leafletOptions(maxZoom = 9)) %>%
    addTiles() %>%
    addCircleMarkers(radius = 0.5, opacity = 0.6, label = ~meetnet)
  )
)

```


```{r}

locaties_shared <- SharedData$new(bezochte_locaties_sf)

bscols(
  list(
    bscols(widths = c(6, 3, 3),
    filter_select("meetnet", "Selecteer meetnet", locaties_shared, ~meetnet),
    filter_checkbox("jaar", "Selecteer jaar", locaties_shared, ~jaar),
    filter_checkbox("is_sample", "Selecteer type locatie", locaties_shared, ~ifelse(is_sample == 1, "Meetnetlocatie", "Extra locatie"))),
    bscols(widths = c(7, 5),
    leaflet(locaties_shared, options = leafletOptions(maxZoom = 9)) %>%
      addTiles() %>%
      addCircleMarkers(radius = 0.5, opacity = 0.6, label = ~meetnet),
    plot_ly(locaties_shared, x = ~jaar, color = ~soortgroep) %>% 
      add_histogram() %>%
      layout(legend = list(x = 100, y = 0.5))
      ) 
      
  )
)

```
